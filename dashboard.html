<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kecoaxx Leaderboard</title>
<style>
* { box-sizing: border-box; }
body { 
  font-family:"Inter", "Roboto", sans-serif; 
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
  color:#e0e0e0; 
  margin:0; 
  padding:16px; 
  min-height: 100vh;
}
h1 { 
  text-align:center; 
  margin:0 0 24px 0; 
  font-size:2rem; 
  font-weight:700;
  background: linear-gradient(135deg, #ffd700 0%, #90caf9 50%, #9c27b0 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-shadow: 0 0 40px rgba(255,215,0,0.3);
  animation: glow 3s ease-in-out infinite;
}

@keyframes glow {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(1.3); }
}

.stats { 
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
  margin-bottom: 20px;
}
.stat-box { 
  background: linear-gradient(135deg, #1e1e2e 0%, #252535 100%);
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.6);
  border: 1px solid rgba(144,202,249,0.2);
  transition: all 0.3s ease;
  text-align: center;
}
.stat-box:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(144,202,249,0.4);
  border-color: rgba(144,202,249,0.5);
}
.stat-box .label {
  font-size: 0.75rem;
  color: #999;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 8px;
}
.stat-box .value { 
  font-weight: bold; 
  font-size: 1.6rem;
  color: #90caf9;
}
.green-dot {
  display: inline-block;
  width: 8px;
  height: 8px;
  background: #4caf50;
  border-radius: 50%;
  margin-right: 6px;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1.2); }
}

.filters { 
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 20px;
}
.filters input, .filters select {
  flex: 1;
  min-width: 140px;
  padding: 10px 14px;
  background: #1e1e2e;
  border: 1px solid #333;
  border-radius: 8px;
  color: #e0e0e0;
  font-size: 0.9rem;
  transition: all 0.3s ease;
}
.filters input:focus, .filters select:focus {
  outline: none;
  border-color: #90caf9;
  box-shadow: 0 0 0 3px rgba(144,202,249,0.2);
}
button { 
  padding: 10px 20px;
  background: linear-gradient(135deg, #90caf9 0%, #64b5f6 100%);
  color: #000;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.9rem;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(144,202,249,0.3);
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(144,202,249,0.5);
}

/* Desktop Table */
.table-container { 
  overflow-x: auto;
  margin-bottom: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.6);
}
table { 
  width: 100%;
  min-width: 700px;
  border-collapse: collapse;
  background: #1e1e2e;
}
thead { 
  background: linear-gradient(135deg, #252535 0%, #2a2a3e 100%);
  position: sticky;
  top: 0;
  z-index: 10;
}
th { 
  padding: 14px 16px;
  text-align: left;
  color: #90caf9;
  font-weight: 600;
  border-bottom: 2px solid #90caf9;
  white-space: nowrap;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
th.sortable { 
  cursor: pointer;
  user-select: none;
}
th.sortable:hover {
  background: rgba(144,202,249,0.1);
}
td { 
  padding: 12px 16px;
  border-bottom: 1px solid #2a2a3e;
  vertical-align: middle;
  font-size: 0.85rem;
}
tr { 
  transition: all 0.3s ease;
}
tr:hover { 
  transform: scale(1.01);
  z-index: 5;
}

/* Mobile Cards */
.cards-container {
  display: none;
}
.device-card {
  background: #1e1e2e;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  border-left: 4px solid;
  box-shadow: 0 4px 12px rgba(0,0,0,0.6);
  transition: all 0.3s ease;
  animation: slideIn 0.5s ease;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.device-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.8);
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  padding-bottom: 12px;
  border-bottom: 1px solid #2a2a3e;
}
.card-rank {
  font-size: 1.5rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-name {
  font-size: 1.1rem;
  font-weight: 600;
  color: #fff;
  flex: 1;
  margin-left: 12px;
}
.card-sent {
  font-size: 1.3rem;
  font-weight: 700;
  color: #90caf9;
}
.card-details {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  font-size: 0.8rem;
}
.card-detail {
  display: flex;
  flex-direction: column;
}
.card-detail-label {
  color: #999;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 2px;
}
.card-detail-value {
  color: #e0e0e0;
  font-weight: 500;
}

/* Rank Colors - Table */
tr.rank-1 {
  background: linear-gradient(135deg, #4d3d1f 0%, #3a2e16 100%) !important;
  border-left: 4px solid #ffd700;
  box-shadow: 0 0 20px rgba(255,215,0,0.3);
}
tr.rank-1:hover {
  background: linear-gradient(135deg, #5d4d2f 0%, #4a3e26 100%) !important;
  box-shadow: 0 0 30px rgba(255,215,0,0.5);
}
tr.rank-1 .rank-cell {
  color: #ffd700;
  text-shadow: 0 0 10px rgba(255,215,0,0.8);
}

tr.rank-2, tr.rank-3 {
  background: linear-gradient(135deg, #353a40 0%, #2a2f35 100%) !important;
  border-left: 4px solid #c0c0c0;
  box-shadow: 0 0 15px rgba(192,192,192,0.2);
}
tr.rank-2:hover, tr.rank-3:hover {
  background: linear-gradient(135deg, #404550 0%, #353a40 100%) !important;
  box-shadow: 0 0 25px rgba(192,192,192,0.4);
}
tr.rank-2 .rank-cell, tr.rank-3 .rank-cell {
  color: #c0c0c0;
  text-shadow: 0 0 8px rgba(192,192,192,0.6);
}

tr.rank-4, tr.rank-5, tr.rank-6, tr.rank-7, tr.rank-8, tr.rank-9, tr.rank-10 {
  background: linear-gradient(135deg, #3d2e1f 0%, #2e2216 100%) !important;
  border-left: 4px solid #cd7f32;
  box-shadow: 0 0 12px rgba(205,127,50,0.2);
}
tr.rank-4:hover, tr.rank-5:hover, tr.rank-6:hover, tr.rank-7:hover, 
tr.rank-8:hover, tr.rank-9:hover, tr.rank-10:hover {
  background: linear-gradient(135deg, #4d3e2f 0%, #3e3226 100%) !important;
  box-shadow: 0 0 20px rgba(205,127,50,0.4);
}
tr.rank-4 .rank-cell, tr.rank-5 .rank-cell, tr.rank-6 .rank-cell, 
tr.rank-7 .rank-cell, tr.rank-8 .rank-cell, tr.rank-9 .rank-cell, tr.rank-10 .rank-cell {
  color: #cd7f32;
  text-shadow: 0 0 6px rgba(205,127,50,0.5);
}

tr.rank-11, tr.rank-12, tr.rank-13, tr.rank-14, tr.rank-15, 
tr.rank-16, tr.rank-17, tr.rank-18, tr.rank-19, tr.rank-20 {
  background: linear-gradient(135deg, #352640 0%, #261d2f 100%) !important;
  border-left: 4px solid #9c27b0;
  box-shadow: 0 0 10px rgba(156,39,176,0.2);
}
tr.rank-11:hover, tr.rank-12:hover, tr.rank-13:hover, tr.rank-14:hover, tr.rank-15:hover,
tr.rank-16:hover, tr.rank-17:hover, tr.rank-18:hover, tr.rank-19:hover, tr.rank-20:hover {
  background: linear-gradient(135deg, #453650 0%, #362d3f 100%) !important;
  box-shadow: 0 0 18px rgba(156,39,176,0.4);
}
tr.rank-11 .rank-cell, tr.rank-12 .rank-cell, tr.rank-13 .rank-cell, tr.rank-14 .rank-cell, 
tr.rank-15 .rank-cell, tr.rank-16 .rank-cell, tr.rank-17 .rank-cell, tr.rank-18 .rank-cell, 
tr.rank-19 .rank-cell, tr.rank-20 .rank-cell {
  color: #9c27b0;
  text-shadow: 0 0 6px rgba(156,39,176,0.5);
}

/* Rank Colors - Cards */
.device-card.rank-1 {
  border-color: #ffd700;
  background: linear-gradient(135deg, #4d3d1f 0%, #3a2e16 100%);
  box-shadow: 0 4px 20px rgba(255,215,0,0.4);
}
.device-card.rank-1 .card-rank { color: #ffd700; text-shadow: 0 0 10px rgba(255,215,0,0.8); }

.device-card.rank-2, .device-card.rank-3 {
  border-color: #c0c0c0;
  background: linear-gradient(135deg, #353a40 0%, #2a2f35 100%);
  box-shadow: 0 4px 18px rgba(192,192,192,0.3);
}
.device-card.rank-2 .card-rank, .device-card.rank-3 .card-rank { 
  color: #c0c0c0; 
  text-shadow: 0 0 8px rgba(192,192,192,0.6); 
}

.device-card.rank-4, .device-card.rank-5, .device-card.rank-6, 
.device-card.rank-7, .device-card.rank-8, .device-card.rank-9, .device-card.rank-10 {
  border-color: #cd7f32;
  background: linear-gradient(135deg, #3d2e1f 0%, #2e2216 100%);
  box-shadow: 0 4px 16px rgba(205,127,50,0.3);
}
.device-card.rank-4 .card-rank, .device-card.rank-5 .card-rank, .device-card.rank-6 .card-rank,
.device-card.rank-7 .card-rank, .device-card.rank-8 .card-rank, .device-card.rank-9 .card-rank,
.device-card.rank-10 .card-rank {
  color: #cd7f32;
  text-shadow: 0 0 6px rgba(205,127,50,0.5);
}

.device-card.rank-11, .device-card.rank-12, .device-card.rank-13, .device-card.rank-14, 
.device-card.rank-15, .device-card.rank-16, .device-card.rank-17, .device-card.rank-18,
.device-card.rank-19, .device-card.rank-20 {
  border-color: #9c27b0;
  background: linear-gradient(135deg, #352640 0%, #261d2f 100%);
  box-shadow: 0 4px 14px rgba(156,39,176,0.3);
}
.device-card.rank-11 .card-rank, .device-card.rank-12 .card-rank, .device-card.rank-13 .card-rank,
.device-card.rank-14 .card-rank, .device-card.rank-15 .card-rank, .device-card.rank-16 .card-rank,
.device-card.rank-17 .card-rank, .device-card.rank-18 .card-rank, .device-card.rank-19 .card-rank,
.device-card.rank-20 .card-rank {
  color: #9c27b0;
  text-shadow: 0 0 6px rgba(156,39,176,0.5);
}

.rank-cell {
  font-weight: bold;
  font-size: 0.95rem;
  text-align: center;
  min-width: 60px;
}
.medal {
  font-size: 1.2rem;
  margin-right: 4px;
}

.empty {
  text-align: center;
  padding: 40px;
  color: #666;
  font-size: 1rem;
}

.chart-section {
  background: #1e1e2e;
  padding: 20px;
  border-radius: 12px;
  margin-top: 30px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.6);
}
.chart-title {
  font-size: 1.2rem;
  font-weight: 600;
  color: #90caf9;
  margin-bottom: 16px;
  text-align: center;
}
canvas { 
  display: block;
  max-width: 100%;
}

footer {
  text-align: center;
  padding: 20px;
  font-size: 0.8rem;
  color: #666;
  margin-top: 30px;
}
footer span {
  color: #90caf9;
  font-weight: 600;
}

/* Responsive */
@media (max-width: 768px) {
  h1 { font-size: 1.5rem; }
  .table-container { display: none; }
  .cards-container { display: block; }
  .filters input, .filters select {
    min-width: 100%;
  }
  button {
    width: 100%;
  }
}
</style>
</head>
<body>

<h1>üèÜ Kecoaxx Leaderboard</h1>

<div class="stats">
  <div class="stat-box">
    <div class="label"><span class="green-dot"></span>Active</div>
    <div class="value" id="stat-active">0</div>
  </div>
  <div class="stat-box">
    <div class="label">Total Sent</div>
    <div class="value" id="stat-sent">0</div>
  </div>
  <div class="stat-box">
    <div class="label">Total API</div>
    <div class="value" id="stat-totalapi">0</div>
  </div>
</div>

<div class="filters">
  <input type="text" id="searchInput" placeholder="üîç Cari nama, app, atau versi..." />
  <select id="timeRange">
    <option value="today">Hari ini</option>
    <option value="all">Semua</option>
  </select>
  <select id="statusFilter">
    <option value="active">Show Active</option>
    <option value="inactive">Show Inactive</option>
    <option value="all">Show All</option>
  </select>
  <button id="refreshBtn">üîÑ Refresh Data</button>
</div>

<!-- Desktop Table -->
<div class="table-container">
  <table>
    <thead>
      <tr>
        <th>Rank</th>
        <th>Nama</th>
        <th class="sortable">Sent ‚ñ≤‚ñº</th>
        <th>Device</th>
        <th>Bot</th>
        <th>App</th>
        <th>API Ranges</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="devices-table">
      <tr><td colspan="8" class="empty">Loading data...</td></tr>
    </tbody>
  </table>
</div>

<!-- Mobile Cards -->
<div class="cards-container" id="devices-cards">
  <div class="empty">Loading data...</div>
</div>

<div class="chart-section">
  <div class="chart-title">üìä Sent History Stats</div>
  <canvas id="sentChart" height="200"></canvas>
  <button id="resetZoom" style="margin-top: 16px; width: auto;">Reset Zoom</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.2.0/dist/chartjs-plugin-zoom.min.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBWrIDwTn4Byd9gZdYeGtwVUe0q2f2KYT4",
  authDomain: "kecoaxx-db898.firebaseapp.com",
  databaseURL: "https://kecoaxx-db898-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "kecoaxx-db898",
  storageBucket: "kecoaxx-db898.firebasestorage.app",
  messagingSenderId: "929070876762",
  appId: "1:929070876762:web:696c8699f91e8022cc7063"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const devicesRef = ref(db, "devices");
const sentHistoryRef = ref(db, "sentHistory");
const apiKeysRef = ref(db, "apiKeys/list");

const searchInput = document.getElementById("searchInput");
const timeRange = document.getElementById("timeRange");
const statusFilter = document.getElementById("statusFilter");
const table = document.getElementById("devices-table");
const cardsContainer = document.getElementById("devices-cards");
const statActive = document.getElementById("stat-active");
const statSent = document.getElementById("stat-sent");
const statTotalApi = document.getElementById("stat-totalapi");

let devicesData = [];
let sortSentAsc = false;

function getMedalIcon(rank) {
  if (rank === 1) return '<span class="medal">ü•á</span>';
  if (rank === 2) return '<span class="medal">ü•à</span>';
  if (rank === 3) return '<span class="medal">ü•â</span>';
  return '';
}

function renderTable() {
  table.innerHTML = "";
  cardsContainer.innerHTML = "";
  
  let filtered = devicesData.filter(d => {
    const searchTerm = searchInput.value.toLowerCase();
    const name = (d.botName || "").toLowerCase();
    const app = (d.pkgName || "").toLowerCase();
    const version = (d.appVersion || "").toLowerCase();
    return name.includes(searchTerm) || app.includes(searchTerm) || version.includes(searchTerm);
  });
  
  filtered = filtered.filter(d => {
    const sent = timeRange.value === "today" ? (d.sentToday ?? 0) : (d.totalSent ?? 0);
    const isActive = sent > 0;
    if (statusFilter.value === "active") return isActive;
    if (statusFilter.value === "inactive") return !isActive;
    return true;
  });
  
  filtered.sort((a, b) => {
    const valA = timeRange.value === "today" ? (a.sentToday ?? 0) : (a.totalSent ?? 0);
    const valB = timeRange.value === "today" ? (b.sentToday ?? 0) : (b.totalSent ?? 0);
    return valB - valA;
  });
  
  filtered.forEach((d, index) => {
    const rank = index + 1;
    let sent = timeRange.value === "today" ? (d.sentToday ?? 0) : (d.totalSent ?? 0);
    
    const rangeStart = d.rangeStart !== undefined ? d.rangeStart : "-";
    const rangeEnd = d.rangeEnd !== undefined ? d.rangeEnd : "-";
    const rangeDisplay = (rangeStart !== "-" && rangeEnd !== "-") ? `${rangeStart}-${rangeEnd}` : "-";
    
    const val = v => v ? v : "-";
    const rankClass = `rank-${rank <= 20 ? rank : 'default'}`;
    const medalIcon = getMedalIcon(rank);
    
    // Table row
    table.innerHTML += `
      <tr class="${rankClass}">
        <td class="rank-cell">${medalIcon}#${rank}</td>
        <td>${val(d.botName)}</td>
        <td><strong>${val(sent)}</strong></td>
        <td>${val(d.deviceName || d.id)}</td>
        <td>${val(d.appVersion ? "v." + d.appVersion : "")}</td>
        <td>${val(d.pkgName)}</td>
        <td>${val(rangeDisplay)}</td>
        <td>${val(d.status)}</td>
      </tr>`;
    
    // Mobile card
    cardsContainer.innerHTML += `
      <div class="device-card ${rankClass}">
        <div class="card-header">
          <div class="card-rank">${medalIcon}#${rank}</div>
          <div class="card-name">${val(d.botName)}</div>
          <div class="card-sent">${val(sent)}</div>
        </div>
        <div class="card-details">
          <div class="card-detail">
            <div class="card-detail-label">Device</div>
            <div class="card-detail-value">${val(d.deviceName || d.id)}</div>
          </div>
          <div class="card-detail">
            <div class="card-detail-label">Bot Ver</div>
            <div class="card-detail-value">${val(d.appVersion ? "v." + d.appVersion : "")}</div>
          </div>
          <div class="card-detail">
            <div class="card-detail-label">App</div>
            <div class="card-detail-value">${val(d.pkgName)}</div>
          </div>
          <div class="card-detail">
            <div class="card-detail-label">API Range</div>
            <div class="card-detail-value">${val(rangeDisplay)}</div>
          </div>
          <div class="card-detail">
            <div class="card-detail-label">Status</div>
            <div class="card-detail-value">${val(d.status)}</div>
          </div>
        </div>
      </div>`;
  });
  
  if (filtered.length === 0) {
    table.innerHTML = `<tr><td colspan="8" class="empty">Tidak ada data ditemukan</td></tr>`;
    cardsContainer.innerHTML = `<div class="empty">Tidak ada data ditemukan</div>`;
  }
}

async function fetchDevices() {
  try {
    const snapshot = await get(devicesRef);
    devicesData = [];
    let totalSent = 0, activeCount = 0;

    snapshot.forEach(child => {
      const d = child.val();
      d.id = child.key;

      let sentValue = 0;
      if (timeRange.value === "today" && d.hasOwnProperty('sentToday')) sentValue = d.sentToday;
      else if (timeRange.value === "all" && d.hasOwnProperty('totalSent')) sentValue = d.totalSent;

      if (sentValue > 0) activeCount++;
      totalSent += sentValue;

      d._sentValue = sentValue;
      devicesData.push(d);
    });

    statActive.textContent = activeCount;
    statSent.textContent = totalSent;
    renderTable();
  } catch (err) {
    console.error("Error devices:", err);
    table.innerHTML = `<tr><td colspan="8" class="empty">Error loading data</td></tr>`;
    cardsContainer.innerHTML = `<div class="empty">Error loading data</div>`;
  }
}

async function fetchApiKeysCount() {
  try {
    const snapshot = await get(apiKeysRef);
    let apiCount = 0;
    snapshot.forEach(() => apiCount++);
    statTotalApi.textContent = apiCount;
  } catch (err) {
    console.error("Error API keys:", err);
    statTotalApi.textContent = "0";
  }
}

const ctx = document.getElementById("sentChart").getContext("2d");
let sentChart = null;

async function fetchSentHistory() {
  try {
    const snapshot = await get(sentHistoryRef);
    const allDates = [];
    snapshot.forEach(child => { 
      allDates.push({ date: child.key, total: child.val().totalSent ?? 0 }); 
    });
    const labels = allDates.map(d => d.date);
    const dataPoints = allDates.map(d => d.total);

    if (sentChart) sentChart.destroy();

    sentChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [{
          label: "Total Sent",
          data: dataPoints,
          fill: true,
          borderColor: "#90caf9",
          backgroundColor: "rgba(144,202,249,0.3)",
          tension: 0.4,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointBackgroundColor: "#90caf9",
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { 
            labels: { 
              color: "#fff",
              font: { size: 14, weight: 600 }
            } 
                    },
          tooltip: { 
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(0,0,0,0.7)',
            titleFont: { size: 14, weight: 'bold' },
            bodyFont: { size: 12 },
            callbacks: {
              label: function(context) {
                return `${context.dataset.label}: ${context.parsed.y} pts`;
              }
            }
          },
          legend: {
            labels: { color: '#fff' }
          }
        },
        scales: {
          x: {
            ticks: { color: '#ccc' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          },
          y: {
            ticks: { color: '#ccc' },
            grid: { color: 'rgba(255,255,255,0.1)' }
          }
        }
      }
    });

    // Update data realtime dari Firebase
    const leaderboardRef = ref(db, 'leaderboard');
    onValue(leaderboardRef, (snapshot) => {
      const data = snapshot.val() || {};
      const entries = Object.entries(data).map(([key, val]) => ({
        id: key,
        ...val
      }));

      // Urutkan berdasarkan skor tertinggi
      entries.sort((a, b) => b.score - a.score);

      // Update leaderboard tampilan
      const leaderboardDiv = document.getElementById('leaderboard');
      leaderboardDiv.innerHTML = '';
      entries.forEach((player, index) => {
        const div = document.createElement('div');
        div.className = 'player-row';
        div.innerHTML = `
          <div class="rank">${index + 1}</div>
          <div class="name">${player.botName || 'Unknown Bot'}</div>
          <div class="score">${player.score} pts</div>
        `;
        leaderboardDiv.appendChild(div);
      });

      // Update chart
      chart.data.labels = entries.map(e => e.botName);
      chart.data.datasets[0].data = entries.map(e => e.score);
      chart.update();
    });
  </script>
</body>
</html>

