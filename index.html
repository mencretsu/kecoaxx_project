<style>
.button {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: #24292e;
  color: #fff;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 500;
  transition: background 0.2s;
  cursor: pointer;
}
.button:hover {
  background: #444c56;
}
#releases {
  margin-top: 15px;
  list-style: none;
  padding: 0;
  font-family: system-ui;
}
.release-item {
  margin-bottom: 10px;
  background: #f6f8fa;
  border-radius: 6px;
  padding: 8px 12px;
}
.release-item a {
  color: #0969da;
  text-decoration: none;
}
.release-item a:hover {
  text-decoration: underline;
}
.size {
  color: #555;
  font-size: 13px;
}
.date {
  color: #777;
  font-size: 13px;
}
</style>

<a id="loadReleases" class="button">
  <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
    <path d="M12 3v10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M8 11l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M21 21H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
  Kecoaxx Versi Lawas
</a>

<div id="releases"></div>

<script>
document.getElementById("loadReleases").addEventListener("click", async () => {
  const container = document.getElementById("releases");
  container.innerHTML = "<p>⏳ Loading</p>";

  const res = await fetch("https://api.github.com/repos/mencretsu/kecoaxx_project/releases");
  const releases = await res.json();

  if (!releases.length) {
    container.innerHTML = "<p>Belum ada versi</p>";
    return;
  }

  container.innerHTML = "";
  releases.forEach(release => {
    release.assets.forEach(asset => {
      const sizeMB = (asset.size / 1024 / 1024).toFixed(1);
      const uploaded = new Date(asset.updated_at).toLocaleDateString('id-ID');
      const div = document.createElement("div");
      div.className = "release-item";
      div.innerHTML = `
        <a href="${asset.browser_download_url}" target="_blank">${asset.name}</a><br>
        <span class="size">${sizeMB} MB</span> • 
        <span class="date">${uploaded}</span>
      `;
      container.appendChild(div);
    });
  });

  // disable tombol biar ga fetch ulang
  document.getElementById("loadReleases").style.pointerEvents = "none";
  document.getElementById("loadReleases").style.opacity = "0.6";
});
</script>
